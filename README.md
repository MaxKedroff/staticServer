# Сервер для управления переменной `count`(тестовое задание для компании)


## Архитектура

- **Статический класс-сервер:**
  - **Переменная `count`:** Глобальное целочисленное состояние.
  - **Методы:**
    - `GetCount()`: Возвращает текущее значение `count`.
    - `AddToCount(int value)`: Добавляет указанное значение к `count`.

- **Синхронизация доступа:**
  - Используется `ReaderWriterLockSlim` для управления конкурентным доступом.
  - **Чтение:** Метод `GetCount()` использует `EnterReadLock`, что позволяет нескольким потокам одновременно считывать значение.
  - **Запись:** Метод `AddToCount(int value)` использует `EnterWriteLock`, обеспечивая одиночный доступ, при котором другие потоки ожидают завершения операции записи.

## Принцип работы

1. **Параллельное чтение:**
   - Многопоточные вызовы метода `GetCount()` могут выполняться параллельно, поскольку используется read-lock, позволяющий одновременный доступ к значению `count`.

2. **одиночная запись:**
   - При вызове `AddToCount(int value)` устанавливается write-lock, который блокирует все другие операции чтения и записи до завершения записи, обеспечивая целостность данных.

3. **Блокировка во время записи:**
   - Если в данный момент выполняется операция записи, потоки, запрашивающие чтение, будут ожидать завершения записи, чтобы не получить неконсистентное состояние переменной.

4. **Сценарии блокировки:**
   - Если выполняются только операции чтения, запросы на запись будут ожидать освобождения всех read-блокировок.
   - После завершения записи read-блокировки снимаются, позволяя чтению продолжиться.

## Выгоды и возможные проблемы

- **плюсы:**
  - **Высокая производительность при операциях чтения:** Благодаря параллельному выполнению нескольких чтений.
  - **Гарантия целостности данных:** Эксклюзивный доступ при записи предотвращает чтение промежуточных состояний.

- **возможные проблемы:**
  - **Задержки при записи:** Если операций записи много, потоки, выполняющие чтение, могут ждать, что снижает общую производительность.
  - **Сложность управления блокировками:** Неправильное использование может привести к взаимоблокировкам (deadlocks), поэтому важно корректно управлять блокировками.
